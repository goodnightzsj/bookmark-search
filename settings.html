<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>书签搜索 - 极速收藏夹管理与查找工具 - 设置</title>
  <style>
    /* 基础重置和防闪烁 */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; min-height: 100vh; opacity: 0; transition: opacity 0.15s; }
    body.theme-ready { opacity: 1; }
  </style>
</head>
<body data-page="settings">
  <div class="container">
    <div class="page-header">
      <h1>⚙️ 设置与管理</h1>
      <p>自定义您的极速收藏夹管理与查找体验</p>
    </div>

    <!-- 主题设置 -->
    <div class="card">
      <div class="card-title">
        <span><span class="icon">🎨</span> 主题设置</span>
      </div>
      <div class="card-content">
        <div class="form-group">
          <label class="form-label">选择主题</label>
          <div class="theme-grid" id="themeGrid">
            <div class="theme-option" data-theme="original">
              <div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
              <div class="theme-name">经典渐变</div>
            </div>
            <div class="theme-option" data-theme="minimal">
              <div class="theme-preview" style="background: #ffffff; border: 1px solid #e5e7eb;"></div>
              <div class="theme-name">极简白</div>
            </div>
            <div class="theme-option" data-theme="glass">
              <div class="theme-preview" style="background: linear-gradient(135deg, #E0C3FC 0%, #8EC5FC 100%);"></div>
              <div class="theme-name">毛玻璃</div>
            </div>
            <div class="theme-option" data-theme="dark">
              <div class="theme-preview" style="background: #0a0a0a;"></div>
              <div class="theme-name">深色</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 快捷键设置 -->
    <div class="card">
      <div class="card-title">
        <span><span class="icon">⌨️</span> 快捷键设置</span>
      </div>
      <div class="card-content">
        <div class="form-group">
          <label class="form-label">搜索快捷键</label>
          <input type="text" id="shortcutInput" class="form-input" readonly placeholder="Ctrl+Space (Win/Linux) / Command+Space (Mac)">
          <p class="help-text">
            <span class="icon">💡</span>
            <span>Chrome/Edge 快捷键需要在扩展管理页面修改</span>
          </p>
          <div id="shortcutConflict" class="alert alert-warning" style="display: none">
            <span>⚠️</span>
            <div>
              <strong>快捷键冲突警告</strong>
              <p id="conflictMessage"></p>
            </div>
          </div>
        </div>
        <button class="btn btn-primary" id="openShortcutsPage">
          <span>🔗</span>
          <span>打开快捷键设置页面</span>
        </button>
      </div>
    </div>

    <!-- 书签同步设置 -->
    <div class="card">
      <div class="card-title">
        <span><span class="icon">📊</span> 书签同步设置</span>
        <button class="btn btn-secondary" id="syncBookmarks">
          <span>🔄</span>
          <span>同步书签</span>
        </button>
      </div>
      <div class="card-content">
        <div class="form-group">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <p style="font-size: 14px; color: inherit; opacity: 0.7; margin-bottom: 4px;">书签总数</p>
              <p style="font-size: 32px; font-weight: 700;" id="totalBookmarks">--</p>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">自动同步间隔</label>
          <select id="syncInterval" class="form-input">
            <option value="5">5 分钟</option>
            <option value="10">10 分钟</option>
            <option value="15">15 分钟</option>
            <option value="30" selected>30 分钟（推荐）</option>
            <option value="60">1 小时</option>
            <option value="120">2 小时</option>
            <option value="360">6 小时</option>
            <option value="720">12 小时</option>
            <option value="1440">24 小时</option>
            <option value="0">禁用自动同步</option>
          </select>
        </div>

        <div class="form-group">
          <div style="display: flex; gap: 12px; font-size: 13px;">
            <div style="flex: 1;">
              <p style="margin-bottom: 4px; opacity: 0.7;">最后同步时间</p>
              <p style="font-weight: 600;" id="lastSyncDisplay">--</p>
            </div>
            <div style="flex: 1;">
              <p style="margin-bottom: 4px; opacity: 0.7;">下次同步时间</p>
              <p style="font-weight: 600;" id="nextSyncDisplay">--</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 书签更新历史 -->
    <div class="card">
      <div class="card-title">
        <span><span class="icon">📝</span> 书签更新历史 <span class="badge" id="historyCount">0</span></span>
        <div style="display: flex; gap: 8px;">
          <button class="btn btn-secondary btn-sm" id="clearHistory">
            <span>🗑️</span>
            <span>清空</span>
          </button>
          <button class="btn btn-primary btn-sm" id="toggleExportMode">
            <span>📤</span>
            <span>导出书签</span>
          </button>
        </div>
      </div>
      <div class="card-content">
        <div class="export-controls" id="exportControls" style="display: none;">
          <button class="btn btn-secondary btn-sm" id="selectAll">
            <span>☑️</span>
            <span>全选</span>
          </button>
          <button class="btn btn-secondary btn-sm" id="deselectAll">
            <span>⬜</span>
            <span>取消全选</span>
          </button>
          <button class="btn btn-primary btn-sm" id="exportSelected">
            <span>📤</span>
            <span>导出选中</span>
          </button>
          <span class="select-info" id="selectInfo">已选择 0 条</span>
        </div>

        <div id="historyList" class="history-list">
          <div class="empty-state">
            <div class="empty-state-icon">📭</div>
            <p>暂无书签更新记录</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 关于 -->
    <div class="card">
      <div class="card-title">
        <span><span class="icon">ℹ️</span> 关于</span>
      </div>
      <div class="card-content">
        <div class="form-group">
          <p style="line-height: 1.6; opacity: 0.8;">
            <strong>书签搜索 - 极速收藏夹管理与查找工具 v1.8.0</strong><br>
            一个现代化的书签管理和搜索工具。<br><br>
            <strong>功能特性：</strong><br>
            ✓ 快速搜索书签<br>
            ✓ 键盘导航支持<br>
            ✓ 4种主题皮肤切换<br>
            ✓ 定时自动同步<br>
            ✓ 智能对比同步<br>
            ✓ 书签位置追踪<br>
            ✓ 详细的操作历史记录<br>
            ✓ 书签导出功能
          </p>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="theme-loader.js"></script>
  <script type="module" src="settings.js"></script>
</body>
</html>
