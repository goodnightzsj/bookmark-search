<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>书签搜索 - 设置</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 40px 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      .header {
        text-align: center;
        color: #fff;
        margin-bottom: 40px;
      }

      .header h1 {
        font-size: 32px;
        margin-bottom: 8px;
      }

      .header p {
        font-size: 16px;
        opacity: 0.9;
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .card-title {
        font-size: 20px;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group:last-child {
        margin-bottom: 0;
      }

      .form-label {
        display: block;
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 8px;
      }

      .form-input {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 14px;
        transition: all 0.2s;
        font-family: monospace;
      }

      .form-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .form-input:read-only {
        background: #f3f4f6;
        cursor: not-allowed;
      }

      .help-text {
        font-size: 12px;
        color: #6b7280;
        margin-top: 6px;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .alert {
        padding: 12px 16px;
        border-radius: 8px;
        font-size: 14px;
        margin-top: 12px;
        display: flex;
        align-items: flex-start;
        gap: 8px;
      }

      .alert-warning {
        background: #fef3c7;
        color: #92400e;
        border: 1px solid #fbbf24;
      }

      .alert-info {
        background: #dbeafe;
        color: #1e40af;
        border: 1px solid #60a5fa;
      }

      .alert-success {
        background: #d1fae5;
        color: #065f46;
        border: 1px solid #34d399;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }

      .btn-primary {
        background: #667eea;
        color: #fff;
      }

      .btn-primary:hover {
        background: #5568d3;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }

      .btn-secondary {
        background: #e5e7eb;
        color: #374151;
      }

      .btn-secondary:hover {
        background: #d1d5db;
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .history-list {
        max-height: 400px;
        overflow-y: auto;
      }

      .history-item {
        padding: 16px;
        border-bottom: 1px solid #e5e7eb;
        transition: background 0.2s;
      }

      .history-item:last-child {
        border-bottom: none;
      }

      .history-item:hover {
        background: #f9fafb;
      }

      .history-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
      }

      .history-time {
        font-size: 12px;
        color: #6b7280;
      }

      .history-type {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
      }

      .history-type.add {
        background: #d1fae5;
        color: #065f46;
      }

      .history-type.delete {
        background: #fee2e2;
        color: #991b1b;
      }

      .history-type.edit {
        background: #dbeafe;
        color: #1e40af;
      }

      .history-type.move {
        background: #fef3c7;
        color: #92400e;
      }

      .history-content {
        font-size: 14px;
        color: #1f2937;
      }

      .history-url {
        font-size: 12px;
        color: #6b7280;
        margin-top: 4px;
        font-family: monospace;
        word-break: break-all;
      }

      .history-folder {
        font-size: 12px;
        color: #059669;
        margin-top: 4px;
        font-weight: 500;
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #9ca3af;
      }

      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 12px;
      }

      .kbd {
        background: #f3f4f6;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-family: monospace;
        border: 1px solid #d1d5db;
        color: #374151;
      }

      .badge {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
        background: #667eea;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>⚙️ 设置与管理</h1>
        <p>自定义您的书签搜索体验</p>
      </div>

      <!-- 快捷键设置 -->
      <div class="card">
        <div class="card-title">
          <span>⌨️</span>
          <span>快捷键设置</span>
        </div>

        <div class="form-group">
          <label class="form-label" for="shortcutInput">搜索快捷键</label>
          <input
            type="text"
            id="shortcutInput"
            class="form-input"
            readonly
            placeholder="Ctrl+Space"
          />
          <p class="help-text">
            <span>💡</span>
            <span
              >Chrome/Edge
              快捷键需要在扩展管理页面修改：chrome://extensions/shortcuts</span
            >
          </p>
          <div
            id="shortcutConflict"
            class="alert alert-warning"
            style="display: none"
          >
            <span>⚠️</span>
            <div>
              <strong>快捷键冲突警告</strong>
              <p id="conflictMessage"></p>
            </div>
          </div>
          <div class="alert alert-info" style="margin-top: 12px">
            <span>ℹ️</span>
            <div>
              <strong>快捷键设置说明</strong>
              <p style="margin-top: 4px">
                <strong>理想快捷键：</strong>
                <br />• Windows/Linux:
                <kbd class="kbd">Ctrl+Space</kbd>（输入法切换键，易记易用）
                <br />• Mac: <kbd class="kbd">Command+Space</kbd>（类似
                Spotlight） <br /><br />
                <strong>⚠️ 浏览器限制：</strong>
                <br />Chrome/Edge 不允许扩展使用
                <kbd class="kbd">Space</kbd>、<kbd class="kbd">Enter</kbd>、<kbd
                  class="kbd"
                  >Tab</kbd
                >
                等功能键作为快捷键。 <br /><br />
                <strong>📌 推荐替代方案：</strong>
                <br />• <kbd class="kbd">Ctrl+Shift+Q</kbd> /
                <kbd class="kbd">Command+Shift+Q</kbd> —
                <strong>首选推荐</strong>（Q = Quick，避免输入法冲突） <br />•
                <kbd class="kbd">Ctrl+Alt+B</kbd> /
                <kbd class="kbd">Command+Shift+B</kbd> — B = Bookmark <br />•
                <kbd class="kbd">Ctrl+Shift+;</kbd> — 分号键（很少冲突） <br />•
                <strong>⚠️ 避免使用 Ctrl+Shift+F（与微软输入法冲突）</strong>
              </p>
            </div>
          </div>
        </div>

        <button class="btn btn-primary" id="openShortcutsPage">
          <span>🔗</span>
          <span>打开快捷键设置页面</span>
        </button>
      </div>

      <!-- 书签统计 -->
      <div class="card">
        <div class="card-title">
          <span>📊</span>
          <span>书签同步设置</span>
        </div>

        <div class="form-group">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
            "
          >
            <div>
              <p style="font-size: 14px; color: #6b7280; margin-bottom: 4px">
                书签总数
              </p>
              <p
                style="font-size: 32px; font-weight: 700; color: #667eea"
                id="totalBookmarks"
              >
                --
              </p>
            </div>
            <button class="btn btn-secondary" id="syncBookmarks">
              <span>🔄</span>
              <span>同步书签</span>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label" for="syncInterval">自动同步间隔</label>
          <select id="syncInterval" class="form-input">
            <option value="5">5 分钟</option>
            <option value="10">10 分钟</option>
            <option value="15">15 分钟</option>
            <option value="30" selected>30 分钟（推荐）</option>
            <option value="60">1 小时</option>
            <option value="120">2 小时</option>
            <option value="360">6 小时</option>
            <option value="720">12 小时</option>
            <option value="1440">24 小时</option>
            <option value="0">禁用自动同步</option>
          </select>
          <p class="help-text">
            <span>💡</span>
            <span>自动同步间隔越短，书签数据越及时，但会消耗更多资源</span>
          </p>
        </div>

        <div class="form-group">
          <div style="display: flex; gap: 12px; color: #6b7280; font-size: 13px;">
            <div style="flex: 1;">
              <p style="margin-bottom: 4px;">最后同步时间</p>
              <p style="font-weight: 600; color: #374151;" id="lastSyncDisplay">--</p>
            </div>
            <div style="flex: 1;">
              <p style="margin-bottom: 4px;">下次同步时间</p>
              <p style="font-weight: 600; color: #374151;" id="nextSyncDisplay">--</p>
            </div>
          </div>
        </div>

        <div class="alert alert-info">
          <span>ℹ️</span>
          <div>
            <p>书签会根据设定的间隔自动同步，您也可以手动点击同步按钮立即更新。修改同步间隔后会自动保存并生效。</p>
          </div>
        </div>
      </div>

      <!-- 书签更新历史 -->
      <div class="card">
        <div class="card-title">
          <span>📝</span>
          <span>书签更新历史</span>
          <span class="badge" id="historyCount">0</span>
        </div>

        <div class="form-group">
          <div id="historyList" class="history-list">
            <div class="empty-state">
              <div class="empty-state-icon">📭</div>
              <p>暂无书签更新记录</p>
            </div>
          </div>
        </div>

        <button class="btn btn-secondary" id="clearHistory">
          <span>🗑️</span>
          <span>清空历史记录</span>
        </button>
      </div>

      <!-- 关于 -->
      <div class="card">
        <div class="card-title">
          <span>ℹ️</span>
          <span>关于</span>
        </div>

        <div class="form-group">
          <p style="color: #6b7280; line-height: 1.6">
            <strong>书签搜索扩展 v1.3</strong><br />
            一个现代化的书签管理和搜索工具。<br /><br />
            <strong>功能特性：</strong><br />
            ✓ 快速搜索书签<br />
            ✓ 键盘导航支持<br />
            ✓ 响应式设计<br />
            ✓ 定时自动同步（可自定义间隔）<br />
            ✓ 书签位置追踪<br />
            ✓ 详细的操作历史记录<br />
            ✓ 实时同步显示
          </p>
        </div>
      </div>
    </div>

    <script src="settings.js"></script>
  </body>
</html>
